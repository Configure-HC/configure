<!DOCTYPE html>
<!-- 
  Copyright 2025 HC MOTOR Incorporated. 
  All Rights Reserved.

  NOTICE:
  This HTML file is part of the HC MOTOR Vehicle Configuration System.
  Unauthorized access, modification, or distribution of this file or its contents 
  is strictly prohibited. Any tampering with this system may result in improper 
  vehicle configuration, operational issues, or safety hazards. 
  Use only under authorized supervision and in accordance with HC MOTOR guidelines.
-->
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HC Configure - 訂製您的HC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', 'Helvetica Neue', Arial, 'Noto Sans TC', sans-serif;
            background-color: #f4f7fa;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-900 tracking-tight">HC Configure</h1>
            <button onclick="window.open('https://hc-cars-taiwan.webnode.page/car-model-information', '_self')"
                    class="px-4 py-2 bg-gray-800 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition duration-150 shadow-lg">
                選擇其他車型
            </button>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 w-full">
        
        <div class="mb-10">
            <div class="bg-white p-6 rounded-xl shadow-xl">
                <h2 class="text-4xl font-extrabold text-gray-900 mb-2">訂製您的 HC Terra</h2>
                <p class="text-lg text-gray-600 mb-6">Terra：性能與豪華的完美結合。選擇您的配置。</p>
                
                <div id="car-preview" class="w-full h-64 bg-slate-200 rounded-lg flex items-center justify-center text-gray-500 font-semibold border-4 border-slate-300">
                    [汽車視覺預覽區 - 根據選配顯示車色/輪圈/套件]
                    <br>
                    目前選擇：<span id="preview-color" class="font-bold text-gray-700 ml-1">白-標準漆</span>
                </div>
            </div>
        </div>

        <form id="config-form" class="bg-white p-6 rounded-xl shadow-xl">
            <div class="space-y-10">

                <section>
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 mb-4">1. 動力規格</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="powertrain" value="2.0L" data-price="2100000" checked class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">2.0L I4 Twin-Turbo (300PS)</span>
                            <span class="ml-3 text-sm text-gray-600 block">搭配HC AT-8變速箱以及AWD</span>
                            <span class="ml-3 font-bold text-lg text-blue-600 block mt-1">$2,100,000 (基本售價)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="powertrain" value="3.0L" data-price="2500000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">3.0L I6 Twin-Turbo (430PS)</span>
                            <span class="ml-3 text-sm text-gray-600 block">搭配HC AT-8變速箱以及AWD</span>
                            <span class="ml-3 font-bold text-lg text-blue-600 block mt-1">$2,500,000</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="powertrain" value="hybrid" data-price="2400000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">I4 Hybrid Twin-Turbo (綜效420PS)</span>
                            <span class="ml-3 text-sm text-gray-600 block">搭配HC AT-8變速箱以及AWD</span>
                            <span class="ml-3 font-bold text-lg text-blue-600 block mt-1">$2,400,000</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="powertrain" value="electric" data-price="2450000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Electric (350PS)</span>
                            <span class="ml-3 text-sm text-gray-600 block">搭配HC EV-1變速箱以及AWD</span>
                            <span class="ml-3 font-bold text-lg text-blue-600 block mt-1">$2,450,000</span>
                        </label>
                    </div>
                </section>

                <section>
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 mb-4">2. 風格套件</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="style-package" value="basic" data-price="0" checked class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra Basic 套件</span>
                            <span class="ml-3 text-sm text-gray-600 block">$0</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="style-package" value="z-sport" data-price="180000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Z Sport 套件</span>
                            <span class="ml-3 text-sm text-gray-600 block">+ $180,000</span>
                        </label>
                    </div>
                </section>

                <section>
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 mb-4">3. 外觀車色</h3>
                    <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <input type="radio" name="color" id="color-white" value="white" data-price="0" checked class="hidden peer">
                            <label for="color-white" class="block cursor-pointer p-2 border-4 border-transparent rounded-lg hover:border-blue-300 peer-checked:border-blue-500 transition duration-200">
                                <div class="w-12 h-12 mx-auto bg-white border border-gray-300 rounded-full shadow-md mb-2"></div>
                                <span class="text-sm font-medium">白-標準漆 ($0)</span>
                            </label>
                        </div>
                        <div class="text-center">
                            <input type="radio" name="color" id="color-black" value="black" data-price="0" class="hidden peer">
                            <label for="color-black" class="block cursor-pointer p-2 border-4 border-transparent rounded-lg hover:border-blue-300 peer-checked:border-blue-500 transition duration-200">
                                <div class="w-12 h-12 mx-auto bg-gray-900 border border-gray-300 rounded-full shadow-md mb-2"></div>
                                <span class="text-sm font-medium">黑-標準漆 ($0)</span>
                            </label>
                        </div>
                        <div class="text-center">
                            <input type="radio" name="color" id="color-grey" value="grey" data-price="0" class="hidden peer">
                            <label for="color-grey" class="block cursor-pointer p-2 border-4 border-transparent rounded-lg hover:border-blue-300 peer-checked:border-blue-500 transition duration-200">
                                <div class="w-12 h-12 mx-auto bg-gray-500 border border-gray-300 rounded-full shadow-md mb-2"></div>
                                <span class="text-sm font-medium">灰-標準漆 ($0)</span>
                            </label>
                        </div>
                        <div class="text-center">
                            <input type="radio" name="color" id="color-matte" value="matte-grey" data-price="25000" class="hidden peer">
                            <label for="color-matte" class="block cursor-pointer p-2 border-4 border-transparent rounded-lg hover:border-blue-300 peer-checked:border-blue-500 transition duration-200">
                                <div class="w-12 h-12 mx-auto bg-gray-700 rounded-full shadow-md mb-2"></div>
                                <span class="text-sm font-medium">消光灰-特殊漆 (+ $25,000)</span>
                            </label>
                        </div>
                    </div>
                </section>

                <section>
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 mb-4">4. 輪圈</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="wheels" value="18inch" data-price="0" checked class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">18吋Terra Basic 100T雙色切削鋁圈</span>
                            <span class="ml-3 text-sm text-gray-600 block">245/45 R18 ($0)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="wheels" value="19inch" data-price="50000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">19吋Terra Plus 200T雙色切削鋁圈</span>
                            <span class="ml-3 text-sm text-gray-600 block">245/40 R19 (+ $50,000)</span>
                        </label>
                    </div>
                </section>

                <section>
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 mb-4">5. 內裝 - 座椅</h3>
                    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="seats" value="black-pvc" data-price="0" checked class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra Black 皮質 ($0)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="seats" value="brown-pvc" data-price="0" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra Brown 皮質 ($0)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="seats" value="prem-black" data-price="80000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra Premium Black 真皮 (+ $80,000)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="seats" value="prem-brown" data-price="80000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra Premium Brown 真皮 (+ $80,000)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="seats" value="prem-br" data-price="85000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra Premium Black/Red 真皮 (+ $85,000)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="seats" value="zsport-black" data-price="100000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Z Sport Black 真皮跑車座椅 (+ $100,000)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="seats" value="zsport-br" data-price="110000" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Z Sport Black/Red 真皮跑車座椅 (+ $110,000)</span>
                        </label>
                    </div>

                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 mb-4 mt-8">5. 內裝 - 飾板</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="trim" value="dark-alum" data-price="0" checked class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra 深色鋁質飾板 ($0)</span>
                        </label>
                        <label class="config-option p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <input type="radio" name="trim" value="matte-black" data-price="0" class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500">
                            <span class="ml-3 font-semibold text-gray-900 block">Terra 黑色鋁質霧面飾板 ($0)</span>
                        </label>
                    </div>
                </section>

                <section>
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 mb-4">6. 專屬配備 (可複選)</h3>
                    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <label class="config-option flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-green-500 has-[:checked]:bg-green-50">
                            <input type="checkbox" name="equipment" value="privacy-glass" data-price="28000" class="form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500">
                            <span class="ml-3 font-semibold text-gray-900 block">後座暗色隔熱玻璃</span>
                            <span class="ml-auto text-sm text-green-600 font-bold">+ $28,000</span>
                        </label>
                        <label class="config-option flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-green-500 has-[:checked]:bg-green-50">
                            <input type="checkbox" name="equipment" value="anti-theft-bolt" data-price="2500" class="form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500">
                            <span class="ml-3 font-semibold text-gray-900 block">防盜螺栓</span>
                            <span class="ml-auto text-sm text-green-600 font-bold">+ $2,500</span>
                        </label>
                        <label class="config-option flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-green-500 has-[:checked]:bg-green-50">
                            <input type="checkbox" name="equipment" value="alarm-system" data-price="30000" class="form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500">
                            <span class="ml-3 font-semibold text-gray-900 block">防盜警報系統</span>
                            <span class="ml-auto text-sm text-green-600 font-bold">+ $30,000</span>
                        </label>
                        <label class="config-option flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-green-500 has-[:checked]:bg-green-50">
                            <input type="checkbox" name="equipment" value="heated-seats" data-price="50000" class="form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500">
                            <span class="ml-3 font-semibold text-gray-900 block">前後座加熱+通風座椅</span>
                            <span class="ml-auto text-sm text-green-600 font-bold">+ $50,000</span>
                        </label>
                        <label class="config-option flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:shadow-lg transition duration-200 has-[:checked]:border-green-500 has-[:checked]:bg-green-50">
                            <input type="checkbox" name="equipment" value="active-safety" data-price="20000" class="form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500">
                            <span class="ml-3 font-semibold text-gray-900 block">主動安全防護系統</span>
                            <span class="ml-auto text-sm text-green-600 font-bold">+ $20,000</span>
                        </label>
                    </div>
                </section>

            </div>
        </form>

        <div class="bg-gray-800 text-white p-6 rounded-xl shadow-xl flex flex-col justify-between mt-10">
            <div>
                <p class="text-xl font-medium mb-2">總價</p>
                <div id="total-price" class="text-5xl font-extrabold tracking-tight">$2,100,000</div>
                <p class="text-sm text-gray-400 mt-2">包含所有選配與基本車價</p>
            </div>
            
            <button onclick="window.open('https://hc-cars-taiwan.webnode.page/tw/test-drive-booking/step-1', '_blank')"
                    class="w-full mt-6 px-6 py-3 bg-red-600 text-white text-lg font-bold rounded-lg hover:bg-red-700 transition duration-150 shadow-2xl shadow-red-500/50">
                預約試駕
            </button>
        </div>
    </main>

    <footer class="bg-gray-900 text-white mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col md:flex-row justify-between items-center text-sm">
            <div class="mb-4 md:mb-0 text-center md:text-left">
                &copy; HC 台灣總代理 誠德
            </div>
            <div class="flex flex-wrap justify-center md:justify-end space-x-4">
                <a href="#" onclick="window.open('https://hc-cars-taiwan.webnode.page/privacy-policy', '_blank')" class="hover:text-red-400 transition duration-150">法律聲明和隱私權政策</a>
                <a href="#" onclick="window.open('https://hc-cars-taiwan.webnode.page/tw/contact-us', '_blank')" class="hover:text-red-400 transition duration-150">聯絡我們</a>
                <a href="#" onclick="window.open('https://hc-cars-taiwan.webnode.page/home', '_self')" class="hover:text-red-400 transition duration-150">回到首頁</a>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('config-form');
            const totalPriceDisplay = document.getElementById('total-price');
            const previewColorSpan = document.getElementById('preview-color');

            // format price
            function formatPrice(price) {
                return '$' + price.toLocaleString('zh-TW', { style: 'decimal' });
            }

            // [Added] Update form status to URL
            function updateURL() {
                const formData = new FormData(form);
                const params = new URLSearchParams();
                
                // Iterate through all selected data and add them to params.
                for (const [key, value] of formData.entries()) {
                    params.append(key, value);
                }
                
                // Use replaceState to update the URL without refactoring the page
                // Result: ?powertrain=2.0L&color=white...
                const newUrl = `${window.location.pathname}?${params.toString()}`;
                window.history.replaceState(null, '', newUrl);
            }

            // [New Feature] Restore form state from URL (used during initialization)
            function loadStateFromURL() {
                const params = new URLSearchParams(window.location.search);
                
                // If the URL has no parameters, the HTML default values ​​will be used, and no action will be taken
                if ([...params].length === 0) return;

                // First, reset all input fields (pay special attention if they are checkboxes)
                // Iterate through all input elements in the DOM and check if they are in the params list
                form.querySelectorAll('input').forEach(input => {
                    const name = input.name;
                    const value = input.value;
                    const type = input.type;

                    if (params.has(name)) {
                        // Retrieve all values ​​of this parameter in the URL (handling multiple checkbox selections)
                        const paramValues = params.getAll(name);
                        
                        if (type === 'radio') {
                            // Radio: Check the box if the value in the URL equals the value of this input
                            if (paramValues.includes(value)) {
                                input.checked = true;
                            }
                        } else if (type === 'checkbox') {
                            // Checkbox: Check if this value exists in the URL parameter list
                            input.checked = paramValues.includes(value);
                        }
                    } else if (type === 'checkbox') {
                        // If the URL contains parameters but does not include the name of this checkbox, it means the user has unchecked it
                        input.checked = false;
                    }
                    // Note: If the URL for a radio function has no parameters, the parameters are usually determined by subsequent logic, or the HTML defaults are maintained
                });
            }

            // price calculation logic
            function calculateTotal() {
                let total = 0;
                let selectedColor = "白-標準漆"; 
                
                const selectedOptions = form.querySelectorAll('input:checked');

                selectedOptions.forEach(input => {
                    const price = parseInt(input.getAttribute('data-price') || 0);
                    total += price;

                    if (input.name === 'color') {
                        const labelText = input.closest('div').querySelector('span').textContent;
                        selectedColor = labelText.split('(')[0].trim();
                    }
                });

                totalPriceDisplay.textContent = formatPrice(total);
                previewColorSpan.textContent = selectedColor;
                
                // [New Feature] Update the URL after each price calculation
                updateURL();
            }

            // Monitor changes
            form.querySelectorAll('input').forEach(input => {
                input.addEventListener('change', calculateTotal);
            });

            // 1. First try loading the settings from the URL
            loadStateFromURL();
            
            // 2. Perform initial calculations (update UI and price)
            calculateTotal();
        });
    </script>
</body>
</html>